# CMS Strip Tracker Gainscan Analysis
This repository contains macros to produce the plots used in CMS strip tracker optical link radiation damage/annealing analysis. The analysis relies on gainscans.

Instructions:
You must have the GAINSCAN root files in an accessible directory. In "config", find the filenames document for each partition at the desired temperature. (NOTE: only the files pertaining to -15c runs are in working order, 4c needs to be updated.) The documents each contain a list of runs with the filepath followed by a date and time. Add the runs you want to use in the same format. All of the listed runs must be in chronological order, and the code does not currently support more than one run in a given month. The run at the top is the reference run. If you want to temporarily remove a run from the list, you can put a dollar sign ($) at the beginning of the line and it will be ignored by the code.

Make sure you have directories for output and plots, and that the names of the directories match what is used in the "produce histos" shell script. Also check that things like the reference run numbers, and begin and end dates are correct. "produce_-15c_histos.sh" is the script you will run (assuming you don't want 4c). It uses "run_make_partition_hists.C" and "draw_partition.C", where run_make_partition_hists also uses "make_histograms.C". Now you should have plots in the plot directory. Look at them and decide if you want to change the y-axis parameters (y bin number, lower and upper limits). These can be edited in the yaxis_params document in "config". The lines correspond to the plots in this order: measgain, bias, liftoff, threshold, baselineslop, tickheight, linknoise, zerolight. Rerun produce_-15c_histos and repeat until you are happy with the y-axes.
